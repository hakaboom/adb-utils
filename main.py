"""
python setup.py sdist
twine upload dist/*
"""
import re
import sys
import time

from loguru import logger

from adbutils import ADBDevice
from adbutils.extra.performance.fps import Fps

device = ADBDevice(device_id='emulator-5554')
fps_watcher = Fps(device=device)

while True:
    fps_watcher.get_fps_surfaceView("'SurfaceView - com.bilibili.azurlane/com.manjuu.azurlane.MainActivity'")
    time.sleep(2)
    # length_changes, normalized_changes = _GetNormalizedDeltas(frame_lengths, refresh_period)
    #
    # jankiness = [max(0, round(change)) for change in normalized_changes]
    # pause_threshold = 20
    # jank_count = sum(1 for change in jankiness if 0 < change < pause_threshold)
    # # 返回结果，包过平均fps，和 jank的总数
    # logger.info(f'fps={(frame_count - 1) / seconds}\t'
    #             f'jank={jank_count}')
    # time.sleep(.5)


"""
16666666
1025886511694	1025899958964	1025886511694
1025919475572	1025933292296	1025919475572
1025956204947	1025966625628	1025956204947
1025987256048	1025999958960	1025987256048
1026020437609	1026033292292	1026020437609
1026055295292	1026066625624	1026055295292
1026086967611	1026099958956	1026086967611
1026119620096	1026133292288	1026119620096
1026155527584	1026166625620	1026155527584
1026186824742	1026199958952	1026186824742
1026229444182	1026233292284	1026229444182
1026252479967	1026266625616	1026252479967
1026287560342	1026299958948	1026287560342
1026321781286	1026333292280	1026321781286
1026355021346	1026366625612	1026355021346
1026386984076	1026399958944	1026386984076
1026419924289	1026433292276	1026419924289
1026453484084	1026466625608	1026453484084
1026486319210	1026499958940	1026486319210
1026520129847	1026533292272	1026520129847
1026555249585	1026566625604	1026555249585
1026586185279	1026599958936	1026586185279
1026621771055	1026633292268	1026621771055
1026652569657	1026666625600	1026652569657
1026690305528	1026699958932	1026690305528
1026719812866	1026733292264	1026719812866
1026753539655	1026766625596	1026753539655
1026785796883	1026799958928	1026785796883
1026821370733	1026833292260	1026821370733
1026857246021	1026866625592	1026857246021
1026889303023	1026899958924	1026889303023
1026903531650	1026916625590	1026903531650
1026936444763	1026949958922	1026936444763
1026971949195	1026983292254	1026971949195
1027003122086	1027016625586	1027003122086
1027038194415	1027049958918	1027038194415
1027069695320	1027083292250	1027069695320
1027102953444	1027116625582	1027102953444
1027137349454	1027149958914	1027137349454
1027152835576	1027166625580	1027152835576
1027195395817	1027199958912	1027195395817
1027219464657	1027233292244	1027219464657
1027252926087	1027266625576	1027252926087
1027285883083	1027299958908	1027285883083
1027319856074	1027333292240	1027319856074
1027353453243	1027366625572	1027353453243
1027386657658	1027399958904	1027386657658
1027419773478	1027433292236	1027419773478
1027452686449	1027466625568	1027452686449
1027485917767	1027499958900	1027485917767
1027521305002	1027533292232	1027521305002
1027552799476	1027566625564	1027552799476
1027587664524	1027599958896	1027587664524
1027619812170	1027633292228	1027619812170
1027652787863	1027666625560	1027652787863
1027686109474	1027699958892	1027686109474
1027719355780	1027733292224	1027719355780
1027752531968	1027766625556	1027752531968
1027785707907	1027799958888	1027785707907
1027820620073	1027833292220	1027820620073
1027853704027	1027866625552	1027853704027
1027887840191	1027899958884	1027887840191
1027920484241	1027933292216	1027920484241
1027953421696	1027966625548	1027953421696
1027985790430	1027999958880	1027985790430
1028019541517	1028033292212	1028019541517
1028053047711	1028066625544	1028053047711
1028085899349	1028099958876	1028085899349
1028120087245	1028133292208	1028120087245
1028152863524	1028166625540	1028152863524
1028186602105	1028199958872	1028186602105
1028220491949	1028233292204	1028220491949
1028253484557	1028266625536	1028253484557
1028286404139	1028299958868	1028286404139
1028320202174	1028333292200	1028320202174
1028361856543	1028366625532	1028361856543
1028386485765	1028399958864	1028386485765
1028419196942	1028433292196	1028419196942
1028454557711	1028466625528	1028454557711
1028487380595	1028499958860	1028487380595
1028544416201	1028549958858	1028544416201
1028554919387	1028566625524	1028554919387
1028586290428	1028599958856	1028586290428
1028619421368	1028633292188	1028619421368
1028652506520	1028666625520	1028652506520
1028688730689	1028699958852	1028688730689
1028721579810	1028733292184	1028721579810
1028756765902	1028766625516	1028756765902
1028792522057	1028799958848	1028792522057
1028820635769	1028833292180	1028820635769
1028852682818	1028866625512	1028852682818
1028885880626	1028899958844	1028885880626
1028920061970	1028933292176	1028920061970
1028953294837	1028966625508	1028953294837
1028986519798	1028999958840	1028986519798
1029021074773	1029033292172	1029021074773
1029052741242	1029066625504	1029052741242
1029086541641	1029099958836	1029086541641
1029120695026	1029133292168	1029120695026
1029152613062	1029166625500	1029152613062
1029188805473	1029199958832	1029188805473
1029222004788	1029233292164	1029222004788
1029253303642	1029266625496	1029253303642
1029286706202	1029299958828	1029286706202
1029319891294	1029333292160	1029319891294
1029353344352	1029366625492	1029353344352
1029386295556	1029399958824	1029386295556
1029419235632	1029433292156	1029419235632
1029452474980	1029466625488	1029452474980
1029486302631	1029499958820	1029486302631
1029519764250	1029533292152	1029519764250
1029553024675	1029566625484	1029553024675
1029587071541	1029599958816	1029587071541
1029619582657	1029633292148	1029619582657
1029653376770	1029666625480	1029653376770
1029687173302	1029699958812	1029687173302
1029719861488	1029733292144	1029719861488
1029755708946	1029766625476	1029755708946
1029786872721	1029799958808	1029786872721
1029820123125	1029833292140	1029820123125
1029853139073	1029866625472	1029853139073
1029885851545	1029899958804	1029885851545
1029919941672	1029933292136	1029919941672
1029955258824	1029966625468	1029955258824
1029986544935	1029999958800	1029986544935
1030019529697	1030033292132	1030019529697
1030055315528	1030066625464	1030055315528
"""

# if ret:
#     ret = ret.splitlines()
# refresh_period = int(ret[0])
# pattern = re.compile(r'(\d+)')
# fps_data = []
# for i in ret[1:]:
#     _i = pattern.findall(i)
#     fps_data.append(_i)
# print(fps_data)
